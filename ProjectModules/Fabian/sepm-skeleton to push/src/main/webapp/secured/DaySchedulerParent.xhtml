<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<ui:composition xmlns="http://www.w3c.org/1999/xhtml"
                xmlns:f="http://java.sun.com/jsf/core"
                xmlns:h="http://java.sun.com/jsf/html"
                xmlns:ui="http://java.sun.com/jsf/facelets"
                xmlns:p="http://primefaces.org/ui"
                template="/WEB-INF/templates/main.xhtml">
    <ui:define name ="content">
        <h:form id="DaySchedulerParent">
               <p:panel header="Angemeldete Kinder">
                <p:dataTable id="signedKidsTable" var="todaysKids" value="#{todaysKidsController.getSignedKidsParent()}">
                    <p:column headerText="Name">
                        <h:outputText value="#{todaysKidsController.getName(todaysKids.childId)}"/>
                    </p:column>
                    <p:column headerText="Bring Zeit">
                        <h:outputText value="#{todaysKids.dropOffTime}"/>
                    </p:column>
                    <p:column headerText="Abholzeit">
                        <h:outputText value="#{todaysKids.pickUpTime}"/>
                    </p:column>
                    <p:column headerText="Abholperson">
                        <h:outputText value="#{todaysKids.pickUpPerson}"/>
                    </p:column>
                    <p:column headerText="Mittagessen">
                        <h:outputText value="#{todaysKidsController.kidHasLunch(todaysKids.lunch)}"/>
                    </p:column>
                    <p:column headerText="Geburtstag">
                        <h:outputText value="#{todaysKidsController.kidHasBirthday(todaysKids.childId)}"/>
                    </p:column>
                    <p:column exportable="false" style="width:100px;text-align: center">
                         <p:commandButton action="#{todaysKidsController.deleteKidFromDay(todaysKids.childId)}" icon="ui-icon-trash" title="Delete" update="DaySchedulerParent:signedKidsTable"/>
                    </p:column>
                </p:dataTable>
            </p:panel>
            
            <p:panel header="Tag auswaehlen">
	        	<p:outputLabel for="date" value="Datum: " />
				<p:calendar id="date" value="#{todaysKidsController.calDate}" >
				<p:ajax event="dateSelect" update="signedKidsTable" render="signedKidsTable" />
				</p:calendar> 
			
            </p:panel>
            
          
            <p:panel header="Kind eintragen">
				<h:panelGrid columns="2">
					<p:outputLabel value="Names" />
					<p:dataTable id="parentsKids" var="parentsKids" value="#{todaysKidsController.getKids()}" style="width:227px">
                    	<p:column headerText="">
                       		<h:outputText value="#{parentsKids}"/>
                       		<p:commandButton style="margin-top:10px" icon="ui-icon-check" class="ui-button1" action="#{todaysKidsController.setChildId(parentsKids)}"/>
                    	</p:column>
                	</p:dataTable>
					<p:outputLabel value="Bring-Zeit " />
					<p:inputMask value="#{todaysKidsController.newKid.dropOffTime}" mask="99:99" />
					<p:outputLabel value="Abhol-Zeit " />
					<p:inputMask value="#{todaysKidsController.newKid.pickUpTime}" mask="99:99"/>
					<p:outputLabel value="Mittagessen " />
					<p:selectBooleanCheckbox value="#{todaysKidsController.newKid.lunch}" />
					<p:outputLabel value="Abhol-Person " />
					
					
					<p:dataTable id="acquaintances" var="acquaintances" value="#{todaysKidsController.getAcquaintances()}" style="width:227px">
                    	<p:column headerText="">
                       		<h:outputText value="#{acquaintances.name}"/>
                       		<p:commandButton style="margin-top:10px" icon="ui-icon-check" class="ui-button1" action="#{todaysKidsController.setAcquaintances(acquaintances.name)}"/>
                    	</p:column>
                	</p:dataTable>
                	
				</h:panelGrid>

				<p:separator />
				<p:commandButton style="margin-top:10px" icon="ui-icon-check" class="ui-button1" value="Speichern" action="#{todaysKidsController.saveNewKid}" update="DaySchedulerParent:signedKidsTable" />
			

			</p:panel>
            
            
            
 

            <p:panel header="Export All Data">
	            <h:commandLink immediate="true">
	                <p>Excel</p>
	                <p:dataExporter type="xls" postProcessor="#{manager.postProcessXLS}"
	                    target="usersTable" fileName="ActiveUsersExcel" />
	            </h:commandLink>
	            <h:commandLink immediate="true">
	                <p>PDF</p>
	                <p:dataExporter type="pdf" target="usersTable" fileName="ActiveUsersPDF" />
	            </h:commandLink>
        	</p:panel>
        	
   
            
        </h:form>
    </ui:define>
</ui:composition>